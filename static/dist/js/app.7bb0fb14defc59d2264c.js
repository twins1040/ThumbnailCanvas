webpackJsonp([1],{0:function(t,e){},1:function(t,e){},2:function(t,e){},3:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a=n("7+uW"),o=n("Dd8w"),s=n.n(o),r=n("NYxO"),c={computed:s()({},Object(r.c)({selectedStep:"GET_SELECTED_STEP",selectedTemplateId:"GET_SELECTED_TEMPLATE_ID",isEmptySelection:"GET_IS_SELECTED_NODES_EMPTY",isLogin:"GET_IS_LOGIN"}),{fillData:function(){return[{},{logo:!0,right:this.selectedTemplateId?{text:"다음",event:this.nextStep}:void 0},this.isEmptySelection?{left:{text:"이전",event:this.previousStep},right:{text:"다음",event:this.nextStep}}:{right:{text:"완료",event:this.completeEditingData}},{left:{text:"이전",event:this.previousStep}}]},fill:function(){return this.fillData[this.selectedStep]}}),methods:s()({clearAll:function(){confirm("데이터를 초기화 합니다. 계속 진행할까요?")&&(window.localStorage.clear(),window.location.href="/")},previousStep:function(){this.$store.commit("SELECT_STEP",this.selectedStep-1)},nextStep:function(){this.$store.commit("SELECT_STEP",this.selectedStep+1)},completeEditingData:function(){this.$store.commit("SET_SELECTED_NODES",[])}},Object(r.b)(["login","logout"]))},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{attrs:{id:"site-header"}},[n("nav",[t.fill.logo?[n("h1",{on:{click:t.clearAll}},[t._v("썸네일 메이커")])]:t._e(),t._v(" "),t.fill.left?[n("button",{staticClass:"nav-button",attrs:{id:"nav-previous",type:"button"},on:{click:t.fill.left.event}},[n("i",{staticClass:"material-icons"},[t._v("chevron_left")]),t._v(t._s(t.fill.left.text)+"\n      ")])]:t._e(),t._v(" "),t.isLogin?n("button",{staticClass:"nav-button",attrs:{id:"nav-logout",type:"button"},on:{click:function(e){return t.logout()}}},[t._v("로그아웃")]):t._e(),t._v(" "),t.isLogin?t._e():n("button",{staticClass:"nav-button",attrs:{id:"nav-login",type:"button"},on:{click:function(e){return t.login()}}},[t._v("로그인")]),t._v(" "),t.fill.right?[n("button",{staticClass:"nav-button",attrs:{id:"nav-next",type:"button"},on:{click:t.fill.right.event}},[t._v("\n        "+t._s(t.fill.right.text)),n("i",{staticClass:"material-icons"},[t._v("chevron_right")])])]:t._e()],2)])},staticRenderFns:[]},d=n("VU/8")(c,l,!1,null,null,null).exports,u=n("//Fk"),f=n.n(u),p=n("woOf"),h=n.n(p),v=(n("7t+N"),n("tsU9"),n("FG6U")),m=n.n(v),g={data:function(){return{canvas:{}}},computed:s()({},Object(r.c)({editingData:"GET_SELECTED_NODES",vuexCanvas:"GET_CANVAS",selectedStep:"GET_SELECTED_STEP",isBackground:"GET_IS_BACKGROUND"})),methods:s()({},Object(r.d)({updateCanvas:"UPDATE_CANVAS"}),{loadBackground:function(t){var e=new FileReader;e.onload=function(t){this.$store.state.canvas.set_background_image(t.target.result),this.$store.commit("SET_IS_BACKGROUND",!0)}.bind(this),e.readAsDataURL(t.target.files[0])}}),mounted:function(){var t=this,e={},n=new fabric.Canvas("preview");window.canvas=n,this.vuexCanvas!=={}&&n.loadFromJSON(this.vuexCanvas,function(){return n.renderAll.call(n)}),this.updateCanvas(n);var i,a=new fabric.IText("Double Click to edit!",{fontFamily:"Noto Sans KR",fontSize:50,fontWeight:900,fill:"#192930",stroke:"black",strokeWidth:20,paintFirst:"stroke",charSpacing:-100,angle:0,top:n.height/2,left:n.width/2,originX:"center",originY:"center"});new fabric.IText("NONONO!",{fontFamily:"Noto Sans KR",fontSize:50,fontWeight:900,fill:"white",stroke:"black",strokeWidth:20,paintFirst:"stroke",charSpacing:-100,angle:0,top:n.height/2,left:n.width/2,originX:"center",originY:"center"});function o(t){var e=n.getActiveObject();e&&("activeSelection"==e.type?e.forEachObject(function(e){t(e)}):t(e),n.renderAll())}function s(t){return t||(t=n.getActiveObject()),!(!t||"i-text"!==t.type)}function r(t){return t||(t=n.getActiveObject()),!(!t||"group"!==t.type)}function c(t){return t||(t=n.getActiveObject()),s(t)||r(t)}function l(t,e){var i,a,o,r;if(t||(t=n.getActiveObject()),t&&s(t))return r=(o=t).aCoords,o&&("center"!==o.originX&&(o.originX="center",o.set("left",o.left+(r.tr.x-r.tl.x)/2)),"center"!==o.originY&&(o.originY="center",o.set("top",o.top+(r.bl.y-r.tl.y)/2))),e?e.clone(function(t){a=t,n.remove(e)}):t.clone(function(t){t.set({stroke:"green"}),t.strokeWidth+=16,a=t}),t.clone(function(e){e.scaleX;var o=void 0;o=new fabric.Group([a,e]),t.group&&o.set({left:t.group.left+o.left,top:t.group.top+o.top}),n.remove(t).renderAll(),n.add(o),console.log(o),i=o}),i}function d(t){return new m.a(t).load()}function u(t){var e=t.objects;return n.forEachObject(function(t){n.remove(t)}),function(t){var e,n=[];if(function t(e){for(var i in e)e[i]instanceof Object?t(e[i]):"fontFamily"!==i||n.includes(e[i])||n.push(e[i])}(t),console.log(n),0===n.length)return console.log("no font"),e=new f.a(function(t,e){e()});e=d(n.shift());var i=function(t){e=e.then(function(){return d(n[t])})};for(var a in n)i(a);return e}(t).catch(function(t){console.log(t),console.log("폰트 로딩이 느려 기본으로 대체합니다")}).then(function(){fabric.util.enlivenObjects(e,function(t){n.renderOnAddRemove=!1,t.forEach(function(t){r(t)&&t.customSetCoords(),n.add(t)}),n.renderOnAddRemove=!0,n.renderAll()})})}function p(t){var e=new Image;e.src=t,e.onload=function(){var t=new fabric.Image(e),i=n.width/t.width,a=n.height/t.height,o=i>a?i:a;n.setBackgroundImage(t,n.renderAll.bind(n),{scaleX:o,scaleY:o,top:n.height/2,left:n.width/2,originX:"center",originY:"center"})}}n.setDimensions({width:1280,height:720},{backstoreOnly:!0}),n.selection=!0,this.$watch("editingData",function(t){var e=n.getActiveObjects();if(0!==t.length){if(t.length!==e.length)throw new Error("missmatch between data and objs");(e=n.getActiveObjects()).forEach(function(e,i){var a,o,u=t[i];"text"===u.type&&c(e)&&(e.setAllText("text",u.text),a=u.fontFamily,o=e,d(a).then(function(){console.log(a+" loaded"),o.setAllText("fontFamily",a),n.requestRenderAll()}).catch(function(t){console.log(t),alert("폰트 로딩이 느려 기본으로 대체합니다 :"+a)}),e.setUpper("fill",u.fill),e.setAllText("scaleX",u.scale),e.setAllText("scaleY",u.scale),e.setAllText("charSpacing",u.charSpacing),e.setUpper("stroke",u.strokes[0].color),e.setUpper("strokeWidth",u.strokes[0].width),u.strokes[1]&&s(e)&&l(e),r(e)&&(e.setLower("stroke",u.strokes[1].color),e.setLower("strokeWidth",u.strokes[1].width)))}),n.renderAll()}else n.discardActiveObject().renderAll()},{deep:!0}),n.on("mouse:up",function(t){console.log(t.target)}),i="mouse:up",n.on(i,function(){var e=[];n.getActiveObjects().forEach(function(t){var n={},i=[];c(t)||r(t)?(i.push({color:t.getUpper("stroke"),width:t.getUpper("strokeWidth")}),r(t)&&i.push({color:t.getLower("stroke"),width:t.getLower("strokeWidth")}),console.log(t.getUpper("scaleX")),n={type:"text",text:t.getUpper("text"),fontFamily:t.getUpper("fontFamily"),fill:t.getUpper("fill"),scale:t.getUpper("scaleX"),charSpacing:t.getUpper("charSpacing"),strokes:i}):n={type:"undef",url:"",text:"",fontFamily:"",fill:"",scale:1,charSpacing:0,strokes:[]},e.push(n)}),t.$store.commit("SET_SELECTED_NODES",e)}),fabric.Object.prototype.setControlsVisibility({mb:!1,ml:!1,mr:!1,mt:!1}),fabric.Object.prototype.set({transparentCorners:!1,cornerColor:"white",cornerStrokeColor:"#69F",borderColor:"#69F",cornerSize:40,borderScaleFactor:10,padding:8,cornerStyle:"circle",isDoubleText:!1,originX:"center",originY:"center",selectable:!0}),fabric.IText.prototype.set({editable:!0}),h()(fabric.IText.prototype,{setAllText:function(t,e){this.set(t,e)},setUpper:function(t,e){this.set(t,e)},getUpper:function(t){return this.get(t)}}),h()(fabric.Group.prototype,{setUpper:function(t,e){r(this)&&(this.item(1).set(t,e),this.customSetCoords())},getUpper:function(t){if(r(this))return this.item(1).get(t)},setLower:function(t,e){r(this)&&(this.item(0).set(t,e),this.customSetCoords())},getLower:function(t){if(r(this))return this.item(0).get(t)},setAllText:function(t,e){r(this)&&(this.item(0).set(t,e),this.item(1).set(t,e),this.customSetCoords())},customSetCoords:function(){this.addWithUpdate(),this.group&&(this.left-=this.group.left,this.top-=this.group.top)}}),fabric.Group.prototype.on("scaled",function(t){t.target._lastSelected=!1,t.target.addWithUpdate()}),fabric.Group.prototype.on("moved",function(t){t.target._lastSelected=!1}),n.addNewText=function(){a.clone(function(t){var e="#"+(16777216+16777215*Math.random()).toString(16).substr(1,6);t.setUpper("fill",e),n.add(t)})},n.deleteActiveObject=function(){o(function(t){n.remove(t)}),n.discardActiveObject(),n.renderAll(),this.$store.commit("SET_SELECTED_NODES",[])}.bind(this),n.set_background_image=p,n.addImage=function(t){var e=new Image;e.src=t,e.onload=function(){var t=new fabric.Image(e);n.add(t)}},n.cloneObjects=function(){n.getActiveObject().clone(function(t){e=t},["isDoubleText"]),e.clone(function(t){n.discardActiveObject(),t.set({left:t.left+10,top:t.top+10,evented:!0}),"activeSelection"===t.type?(t.canvas=n,t.forEachObject(function(t){n.add(t)}),t.setCoords()):n.add(t),e.top+=10,e.left+=10,n.setActiveObject(t),n.requestRenderAll()},["isDoubleText"])},n.restore_template=function(t){var e=t.backgroundImage;e&&p(e.src),u(t).then(function(){})},n.group_align=function(t,e){var i,a,s=n.getActiveObject();s&&"activeSelection"==s.type?(i={originX:{key:"left",left:-s.width/2,center:0,right:s.width/2},originY:{key:"top",top:-s.height/2,center:0,bottom:s.height/2}},(a=i[t])&&null!=a[e]?o(function(n){n.set(t,e),n.set(a.key,a[e])}):console.log("wrong args")):console.log("no actobj")}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{attrs:{id:"section-preview"}},[n("div",{staticClass:"container"},[t._m(0),t._v(" "),1!==t.selectedStep||t.isBackground?t._e():n("div",{staticClass:"outer",attrs:{id:"cover-wrapper"}},[n("div",{staticClass:"inner",attrs:{id:"cover"}},[n("div",{staticClass:"container"},[n("input",{attrs:{type:"file"},on:{change:function(e){return t.loadBackground(e)}}}),t._v(" "),n("i",{staticClass:"material-icons"},[t._v("add_photo_alternate")]),n("br"),t._v("\n          여기를 눌러 배경 이미지를 불러오세요\n        ")])])]),t._v(" "),t._m(1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"outer",attrs:{id:"preview-wrapper"}},[e("canvas",{staticClass:"inner",attrs:{id:"preview"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"interface"},[e("ul")])}]},b=n("VU/8")(g,_,!1,null,null,null).exports,E={data:function(){return{busy:!1,tabs:{hot:{length:10},my:{length:10}}}},computed:s()({},Object(r.c)({hotTemplates:"GET_HOT_TEMPLATES",myTemplates:"GET_USER_TEMPLATES",canvas:"GET_CANVAS",tab:"GET_TEMPLATE_TAB",user:"GET_USER"}),{selectedTemplateId:function(){return this.$store.state.selectedTemplateId},visibleTemplates:function(){return"hot"===this.tab?this.hotTemplates?this.hotTemplates.slice(-this.tabs.hot.length):[]:"my"===this.tab&&this.myTemplates?this.myTemplates.slice(-this.tabs.my.length):[]}}),methods:s()({},Object(r.d)({setTab:"SET_TEMPLATE_TAB"}),{shiftTab:function(t){this.setTab(t)},selectTemplate:function(t){var e=this;this.$store.dispatch("loadTemplateData",t).then(function(t){e.canvas.restore_template(JSON.parse(t))}),this.$store.commit("SELECT_TEMPLATE",t)},nextStep:function(){this.$store.commit("SELECT_STEP",2)},loadNextTemplates:function(){this.$store.dispatch("loadNextTemplates")},loadMore:function(){var t=this;this.busy=!0,setTimeout(function(){var e=t.tabs[t.tab];console.log(e),e&&(e.length+=10),t.busy=!1},500)},deleteTemplate:function(t,e){var n=this;if(e.stopPropagation(),confirm("정말 삭제하실건가요?"))return this.axios.delete("/templates/"+t+"/").then(function(){n.$store.dispatch("loadHotTemplates")})}})},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"step",attrs:{id:"step-controll-step-template"}},[n("div",{staticClass:"tab"},[n("div",{staticClass:"tab-item",class:{on:"hot"==t.tab},on:{click:function(e){return t.shiftTab("hot")}}},[t._v("인기 템플릿")]),t._v(" "),n("div",{staticClass:"tab-item",class:{on:"my"==t.tab},on:{click:function(e){return t.shiftTab("my")}}},[t._v("내 템플릿")])]),t._v(" "),n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"contents",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"0"}},[n("ul",t._l(t.visibleTemplates.slice().reverse(),function(e){return n("li",{key:e.id,class:{on:t.selectedTemplateId==e.id},style:"background-image:url("+e.thumbnail+")",on:{click:function(n){return t.selectTemplate(e.id)}}},[t.selectedTemplateId==e.id?n("div",{staticClass:"layer"},[n("button",{attrs:{type:"button"},on:{click:t.nextStep}},[t._v("선택 완료")])]):t._e(),t._v(" "),!0===t.user.isSuper||e.owner_id===t.user.id?n("div",[n("div",{staticClass:"material-icons",on:{click:function(n){return t.deleteTemplate(e.id,n)}}},[n("i",[t._v("delete")])])]):t._e()])}),0)])])},staticRenderFns:[]},S=n("VU/8")(E,T,!1,null,null,null).exports,C=n("fZjL"),k=n.n(C),w=n("qQsI"),D=n.n(w),A={props:["value","icon"],data:function(){return{colors:D.a,modalOpened:!1}},computed:{model:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{toggleModal:function(){this.modalOpened=!this.modalOpened,this.modalOpened?window.addEventListener("mousedown",this.checkIsModal):window.removeEventListener("mousedown",this.checkIsModal)},checkIsModal:function(t){for(var e=t.target,n=!1;e&&!n;)e.isSameNode(this.$el)?n=!0:e=e.parentNode;n||(this.modalOpened=!1)},selectColor:function(t){this.$emit("input",t),this.$emit("colorChange"),this.modalOpened=!1}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"twin-color-picker"},[n("button",{staticClass:"color-picker-opener",attrs:{type:"button"},on:{click:t.toggleModal}},[n("i",{staticClass:"material-icons"},[t._v(t._s(t.icon))]),t._v(" "),n("div",{staticClass:"selected-color",style:"background-color:"+t.model})]),t._v(" "),t.modalOpened?n("div",{staticClass:"color-picker-modal"},[n("ul",t._l(t.colors,function(e){return n("li",{style:"background-color:"+e,on:{click:function(n){return t.selectColor(e)}}})}),0)]):t._e()])},staticRenderFns:[]},x={props:{value:{},min:{default:.01},max:{default:10},default:{}},data:function(){var t=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return{isTouchDevice:t,eventNames:{dragStart:t?"touchstart":"mousedown",dragMove:t?"touchmove":"mousemove",dragEnd:t?"touchend":"mouseup"}}},computed:{grabPosition:function(){var t=(this.value-this.min)/(this.max-this.min);return 100*(t=t<0?0:t>1?1:t)}},methods:{bindEvent:function(){this.$el.addEventListener(this.eventNames.dragStart,this.dragStart)},dragStart:function(t){this.tick(t),window.addEventListener(this.eventNames.dragMove,this.dragMove),window.addEventListener(this.eventNames.dragEnd,this.dragEnd)},dragMove:function(t){this.tick(t)},dragEnd:function(t){window.removeEventListener(this.eventNames.dragMove,this.dragMove),window.removeEventListener(this.eventNames.dragEnd,this.dragEnd)},tick:function(t){var e=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]?t.originalEvent.touches[0].clientX:t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX;e=(e=(e-this.$el.getBoundingClientRect().x)/this.$el.offsetWidth)<0?0:e>1?1:e,this.updateValue(e)},updateValue:function(t){this.$emit("input",this.min+(this.max-this.min)*t),this.$emit("slideChange")}},mounted:function(){this.bindEvent()}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"twin-slider"},[e("div",{staticClass:"slider-grab",style:"left:"+this.grabPosition+"%"}),this._v(" "),e("div",{staticClass:"slider-rail"})])},staticRenderFns:[]},O={components:{twinColorPicker:n("VU/8")(A,y,!1,null,null,null).exports,twinSlider:n("VU/8")(x,N,!1,null,null,null).exports},data:function(){return{tab:"font",editingData:{},readyToSubmitToCanvas:!1}},computed:{editingDataType:function(){return this.$store.getters.GET_SELECTED_TYPE},isMultiple:function(){return this.$store.getters.GET_IS_NODE_MULTIPLE},selectedNodes:function(){return this.$store.getters.GET_SELECTED_NODES},canvas:function(){return this.$store.state.canvas}},created:function(){var t=this;this.$watch("selectedNodes",function(e){e.length>0?t.isMultiple?"combined"==t.editingDataType?k()(t.editingData).forEach(function(e){t.editingData[e]=null}):k()(e[0]).forEach(function(n){var i=!0,a=e[0][n];e.forEach(function(t){a!=t[n]&&(i=!1)}),i?t.$set(t.editingData,n,a):t.$set(t.editingData,n,null)}):k()(e[0]).forEach(function(n){t.$set(t.editingData,n,e[0][n])}):k()(t.editingData).forEach(function(e){t.editingData[e]=null})})},methods:s()({updateData:function(t){this.$store.commit("SET_EDITING_DATA",{fieldName:t,data:this.editingData[t]})},shiftTab:function(t){this.tab=t},addStroke:function(){this.editingData.strokes&&this.editingData.strokes.length<2&&this.editingData.strokes.push({width:1,color:"#000"}),this.updateData("strokes")},loadBackground:function(t){var e=new FileReader;e.onload=function(t){this.set_background_image(t.target.result),this.$store.commit("SET_IS_BACKGROUND",!0)}.bind(this),e.readAsDataURL(t.target.files[0])},loadImage:function(t){var e=this.addImage,n=function(t){if(/\.(jpe?g|png|gif)$/i.test(t.name)){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t)}}.bind(this);t.target.files&&[].forEach.call(t.target.files,n)}},(i={},["addNewText","deleteActiveObject","set_background_image","cloneObjects","addImage","group_align"].forEach(function(t){i[t]=function(){this.canvas[t].apply(null,arguments)}}),i))},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"step",attrs:{id:"step-controll-step-edit"}},["none"!==t.editingDataType?n("div",{staticClass:"tab"},["text"===t.editingDataType?[n("div",{staticClass:"tab-item",class:{on:"font"==t.tab},on:{click:function(e){return t.shiftTab("font")}}},[t._v("글자")]),t._v(" "),n("div",{staticClass:"tab-item",class:{on:"style"==t.tab},on:{click:function(e){return t.shiftTab("style")}}},[t._v("스타일")])]:t._e(),t._v(" "),"image"===t.editingDataType?[n("div",{staticClass:"tab-item",class:{on:!0}},[t._v("이미지")])]:t._e()],2):t._e(),t._v(" "),n("div",{staticClass:"contents"},[n("ul",["text"===t.editingDataType&&"font"==t.tab?[n("li",[n("div",{staticClass:"text"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editingData.text,expression:"editingData.text"}],attrs:{type:"text",placeholder:"텍스트"},domProps:{value:t.editingData.text},on:{keyup:function(e){return t.updateData("text")},input:function(e){e.target.composing||t.$set(t.editingData,"text",e.target.value)}}})])]),t._v(" "),n("li",[n("div",{staticClass:"select"},[n("div",{staticClass:"label"},[t._v(t._s(t.editingData.fontFamily))]),t._v(" "),n("i",{staticClass:"material-icons"},[t._v("arrow_drop_down")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.editingData.fontFamily,expression:"editingData.fontFamily"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.editingData,"fontFamily",e.target.multiple?n:n[0])},function(e){return t.updateData("fontFamily")}]}},[n("option",{attrs:{value:"Noto Sans KR"}},[t._v("Noto Sans KR")]),t._v(" "),n("option",{attrs:{value:"Nanum Gothic"}},[t._v("Nanum Gothic")]),t._v(" "),n("option",{attrs:{value:"Nanum Myeongjo"}},[t._v("Nanum Myeongjo")]),t._v(" "),n("option",{attrs:{value:"Hanna"}},[t._v("Hanna")]),t._v(" "),n("option",{attrs:{value:"Poor Story"}},[t._v("Poor Story")]),t._v(" "),n("option",{attrs:{value:"Gothic A1 Regular"}},[t._v("Gothic A1 Regular")]),t._v(" "),n("option",{attrs:{value:"Gothic A1 Light"}},[t._v("Gothic A1 Light")]),t._v(" "),n("option",{attrs:{value:"Gothic A1 Thin"}},[t._v("Gothic A1 Thin")]),t._v(" "),n("option",{attrs:{value:"TmonMonsori"}},[t._v("TmonMonsori")]),t._v(" "),n("option",{attrs:{value:"Cute Font"}},[t._v("Cute Font")]),t._v(" "),n("option",{attrs:{value:"HANNA Pro"}},[t._v("HANNA Pro")]),t._v(" "),n("option",{attrs:{value:"Black Han Sans"}},[t._v("Black Han Sans")]),t._v(" "),n("option",{attrs:{value:"JUA"}},[t._v("JUA")]),t._v(" "),n("option",{attrs:{value:"Swagger"}},[t._v("Swagger")])])])]),t._v(" "),n("li",[n("div",{staticClass:"char-spacing-slider"},[n("div",{staticClass:"icon",on:{click:function(e){t.editingData.charSpacing=0}}},[n("i",{staticClass:"material-icons"},[t._v("format_shapes")])]),t._v(" "),n("twin-slider",{attrs:{min:-300,default:0,max:300},on:{slideChange:function(e){return t.updateData("charSpacing")}},model:{value:t.editingData.charSpacing,callback:function(e){t.$set(t.editingData,"charSpacing",e)},expression:"editingData.charSpacing"}})],1)])]:t._e(),t._v(" "),"text"===t.editingDataType&&"style"==t.tab?[n("li",[n("div",{staticClass:"color-picker-and-slider"},[n("twin-color-picker",{attrs:{icon:"title"},on:{colorChange:function(e){return t.updateData("fill")}},model:{value:t.editingData.fill,callback:function(e){t.$set(t.editingData,"fill",e)},expression:"editingData.fill"}}),t._v(" "),n("twin-slider",{attrs:{min:.05,default:1,max:10},on:{slideChange:function(e){return t.updateData("scale")}},model:{value:t.editingData.scale,callback:function(e){t.$set(t.editingData,"scale",e)},expression:"editingData.scale"}})],1)]),t._v(" "),t._l(t.editingData.strokes,function(e){return n("li",[n("div",{staticClass:"color-picker-and-slider"},[n("twin-color-picker",{attrs:{icon:"edit"},model:{value:e.color,callback:function(n){t.$set(e,"color",n)},expression:"stroke.color"}}),t._v(" "),n("twin-slider",{attrs:{min:0,default:0,max:100},model:{value:e.width,callback:function(n){t.$set(e,"width",n)},expression:"stroke.width"}})],1)])}),t._v(" "),n("li",[t.editingData.strokes&&t.editingData.strokes.length<2?n("div",{staticClass:"stroke-maker"},[n("button",{attrs:{type:"button"},on:{click:t.addStroke}},[n("i",{staticClass:"material-icons"},[t._v("add")]),t._v("외곽선 추가")])]):t._e()])]:t._e(),t._v(" "),t.isMultiple?n("li",[n("div",{staticClass:"vertical-select"},[n("button",{attrs:{type:"button"},on:{click:function(e){return t.group_align("originX","left")}}},[n("i",{staticClass:"material-icons"},[t._v("format_align_left")])]),t._v(" "),n("button",{attrs:{type:"button"},on:{click:function(e){return t.group_align("originX","center")}}},[n("i",{staticClass:"material-icons"},[t._v("format_align_center")])]),t._v(" "),n("button",{attrs:{type:"button"},on:{click:function(e){return t.group_align("originX","right")}}},[n("i",{staticClass:"material-icons"},[t._v("format_align_right")])])])]):t._e(),t._v(" "),"none"!==t.editingDataType?[n("li",[n("div",{staticClass:"objects-controlls"},[n("button",{attrs:{type:"button"},on:{click:t.deleteActiveObject}},[n("i",{staticClass:"material-icons"},[t._v("delete")])]),t._v(" "),n("button",{attrs:{type:"button"},on:{click:t.cloneObjects}},[n("i",{staticClass:"material-icons"},[t._v("file_copy")])])])])]:t._e()],2)]),t._v(" "),"none"===t.editingDataType?n("div",{staticClass:"interface"},[n("ul",[n("li",[n("button",{attrs:{type:"button"},on:{click:t.addNewText}},[n("i",{staticClass:"material-icons"},[t._v("text_fields")]),t._v("글자 추가")])]),t._v(" "),n("li",[n("input",{attrs:{type:"file"},on:{change:function(e){return t.loadImage(e)}}}),n("i",{staticClass:"material-icons"},[t._v("filter_hdr")]),t._v("이미지 추가")]),t._v(" "),n("li",[n("input",{attrs:{type:"file"},on:{change:function(e){return t.loadBackground(e)}}}),n("i",{staticClass:"material-icons"},[t._v("insert_photo")]),t._v("배경 이미지 변경")])])]):t._e()])},staticRenderFns:[]},I=n("VU/8")(O,L,!1,null,null,null).exports,U=n("mvHQ"),$=n.n(U),G={data:function(){return{downloadSrc:""}},computed:s()({},Object(r.c)({isLogin:"GET_IS_LOGIN",canvas:"GET_CANVAS"})),methods:s()({},Object(r.d)({setTemplateTab:"SET_TEMPLATE_TAB",setSelectedStep:"SELECT_STEP"}),Object(r.b)(["loadUserTemplates","loadHotTemplates"]),{createTemplate:function(){var t=this;if(this.isLogin){var e=this.canvas.toJSON();return e.backgroundImage=void 0,this.axios.post("/templates/",{data:$()(e),thumbnail:this.canvas.toDataURL({format:"png",multiplier:.25})}).then(function(e){t.loadUserTemplates(),t.setSelectedStep(1),t.setTemplateTab("my")}).catch(function(){alert("저장이 안됐어요 ㅠㅠ. 다시 로그인해보세요.")})}return alert("로그인이 필요합니다"),this.$store.dispatch("login").then(function(){t.createTemplate()})},downloadCanvas:function(){var t=this,e=document.createElement("a");if(!this.isLogin)return alert("로그인이 필요합니다"),this.$store.dispatch("login").then(function(){t.downloadCanvas()});this.downloadSrc=this.canvas.toDataURL(),e.href=this.downloadSrc,e.download="mypainting.png",e.click()}})},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"step",attrs:{id:"step-controll-step-complete"}},[e("div",{staticClass:"contents"},[e("ul",[e("li",[e("div",{staticClass:"button"},[e("button",{attrs:{id:"complete-save",type:"button"},on:{click:this.createTemplate}},[this._v("내 템플릿에 저장하기")])])]),this._v(" "),e("li",[e("div",{staticClass:"button"},[e("button",{attrs:{id:"complete-download",type:"button"},on:{click:this.downloadCanvas}},[this._v("다운로드하기")])])]),this._v(" "),e("li",[e("div",{staticClass:"image-for-download"},[e("img",{attrs:{id:"img-for-download",src:this.downloadSrc}})])])])])])},staticRenderFns:[]},j={components:{stepTemplate:S,stepEdit:I,stepComplete:n("VU/8")(G,P,!1,null,null,null).exports},computed:{selectedStep:function(){return this.$store.state.selectedStep}},mounted:function(){this.$store.dispatch("loadHotTemplates")}},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{ref:"sectionControll",attrs:{id:"section-controll"}},[n("div",{staticClass:"container"},[1==t.selectedStep?n("step-template"):t._e(),t._v(" "),2==t.selectedStep?n("step-edit"):t._e(),t._v(" "),3==t.selectedStep?n("step-complete"):t._e()],1)])},staticRenderFns:[]},M={components:{siteHeader:d,sectionPreview:b,sectionControll:n("VU/8")(j,R,!1,null,null,null).exports}},F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("site-header"),this._v(" "),e("main",{attrs:{id:"site-container"}},[e("section-preview"),this._v(" "),e("section-controll")],1)],1)},staticRenderFns:[]},B=n("VU/8")(M,F,!1,null,null,null).exports,X=(n("qIvP"),n("d7EF")),H=n.n(X),V=n("W3Iv"),W=n.n(V);a.a.use(r.a);var Y=new r.a.Store({state:{selectedStep:1,templateTab:"hot",selectedTemplateId:null,selectedNodes:[],canvas:{},user:{},apiToken:"",hotTemplates:[],isBackground:!1},mutations:{INIT_STORE:function(t){localStorage.getItem("store")&&this.replaceState(h()(t,JSON.parse(localStorage.getItem("store"))))},UPDATE_CANVAS:function(t,e){t.canvas=e},SELECT_TEMPLATE:function(t,e){t.selectedTemplateId=e},SELECT_STEP:function(t,e){t.selectedStep=e},SET_SELECTED_NODES:function(t,e){t.selectedNodes=e},SET_EDITING_DATA:function(t,e){for(var n=0;n<t.selectedNodes.length;n++)t.selectedNodes[n][e.fieldName]=e.data},SET_USER:function(t,e){t.user=e},SET_API_TOKEN:function(t,e){t.apiToken=e,a.a.axios.defaults.headers.common.Authorization=e},SET_HOT_TEMPLATES:function(t,e){t.hotTemplates=e},SET_TEMPLATE_TAB:function(t,e){t.templateTab=e},SET_IS_BACKGROUND:function(t,e){t.isBackground=e}},getters:{GET_CANVAS:function(t){return t.canvas},GET_SELECTED_NODES:function(t){return t.selectedNodes},GET_IS_SELECTED_NODES_EMPTY:function(t){return 0===t.selectedNodes.length},GET_IS_NODE_MULTIPLE:function(t){return t.selectedNodes.length>1},GET_SELECTED_TYPE:function(t){var e,n="none";if(0===t.selectedNodes.length)return"none";for(e=0;e<t.selectedNodes.length;e++){if(0!==e){if(n===t.selectedNodes[e].type)continue;return"combined"}n=t.selectedNodes[e].type}return n},GET_SELECTED_STEP:function(t){return t.selectedStep},GET_SELECTED_TEMPLATE_ID:function(t){return t.selectedTemplateId},GET_USER:function(t){return t.user},GET_IS_LOGIN:function(t){return!!t.apiToken},GET_HOT_TEMPLATES:function(t){return t.hotTemplates},GET_USER_TEMPLATES:function(t){return t.user.templates},GET_TEMPLATE_TAB:function(t){return t.templateTab},GET_IS_BACKGROUND:function(t){return t.isBackground}},actions:{loadHotTemplates:function(t){t.state,t.rootState;var e=t.commit;t.dispatch;return a.a.axios.get("/templates/").then(function(t){e("SET_HOT_TEMPLATES",t.data)})},loadUserTemplates:function(t){var e=t.state,n=(t.rootState,t.commit);t.dispatch;return a.a.axios.get("/users/"+e.user.id+"/").then(function(t){e.user.templates=t.data.templates,n("SET_USER",e.user)})},loadTemplateData:function(t,e){t.state,t.rootState,t.commit,t.dispatch;return a.a.axios.get("/templates/"+e+"/data/").then(function(t){return t.data})},login:function(t){t.state,t.rootState;var e=t.commit,n=(t.dispatch,{});return a.a.gAuth.getAuthCode().then(function(t){return a.a.axios.post("/login/social/token_user/",{provider:"google-oauth2",code:t,redirect_uri:window.location.origin})}).then(function(t){e("SET_API_TOKEN","Token "+t.data.token),n.id=t.data.id}).then(function(){return a.a.axios.get("/users/"+n.id+"/")}).then(function(t){n.email=t.data.email,n.templates=t.data.templates,n.isSuper=t.data.is_superuser,e("SET_USER",n)})},logout:function(t){t.state,t.rootState;var e=t.commit;t.dispatch;e("SET_USER",{}),e("SET_API_TOKEN","")}}});Y.subscribe(function(t,e){var n={},i=["user","apiToken","hotTemplates"];void 0!==e.canvas.toJSON&&(W()(e).forEach(function(t){var e=H()(t,2),a=e[0],o=e[1];i.includes(a)||(n[a]="canvas"===a?o.toJSON():o)}),localStorage.setItem("store",$()(n)))});var K=Y,J=n("mtWM"),q=n.n(J),z=n("Rf8U"),Q=n.n(z),Z=n("5XsB"),tt=n("bqTm"),et=n.n(tt);a.a.use(Q.a,q.a),a.a.axios.defaults.baseURL="/api";a.a.use(Z.a,{clientId:"626999294415-uotoverock9qhhcrbkkcm1m709i2hsvh.apps.googleusercontent.com",scope:"profile email",prompt:"select_account"}),a.a.use(et.a),new a.a({el:"#app",components:{App:B},template:"<App />",store:K,beforeCreate:function(){this.$store.commit("INIT_STORE")}})},qIvP:function(t,e){},qQsI:function(t,e){t.exports={0:"#f8f9fa",1:"#f1f3f5",2:"#e9ecef",3:"#dee2e6",4:"#ced4da",5:"#adb5bd",6:"#868e96",7:"#495057",8:"#343a40",9:"#212529",10:"#fff5f5",11:"#ffe3e3",12:"#ffc9c9",13:"#ffa8a8",14:"#ff8787",15:"#ff6b6b",16:"#fa5252",17:"#f03e3e",18:"#e03131",19:"#c92a2a",20:"#fff0f6",21:"#ffdeeb",22:"#fcc2d7",23:"#faa2c1",24:"#f783ac",25:"#f06595",26:"#e64980",27:"#d6336c",28:"#c2255c",29:"#a61e4d",30:"#f8f0fc",31:"#f3d9fa",32:"#eebefa",33:"#e599f7",34:"#da77f2",35:"#cc5de8",36:"#be4bdb",37:"#ae3ec9",38:"#9c36b5",39:"#862e9c",40:"#f3f0ff",41:"#e5dbff",42:"#d0bfff",43:"#b197fc",44:"#9775fa",45:"#845ef7",46:"#7950f2",47:"#7048e8",48:"#6741d9",49:"#5f3dc4",50:"#edf2ff",51:"#dbe4ff",52:"#bac8ff",53:"#91a7ff",54:"#748ffc",55:"#5c7cfa",56:"#4c6ef5",57:"#4263eb",58:"#3b5bdb",59:"#364fc7",60:"#e7f5ff",61:"#d0ebff",62:"#a5d8ff",63:"#74c0fc",64:"#4dabf7",65:"#339af0",66:"#228be6",67:"#1c7ed6",68:"#1971c2",69:"#1864ab",70:"#e3fafc",71:"#c5f6fa",72:"#99e9f2",73:"#66d9e8",74:"#3bc9db",75:"#22b8cf",76:"#15aabf",77:"#1098ad",78:"#0c8599",79:"#0b7285",80:"#e6fcf5",81:"#c3fae8",82:"#96f2d7",83:"#63e6be",84:"#38d9a9",85:"#20c997",86:"#12b886",87:"#0ca678",88:"#099268",89:"#087f5b",90:"#ebfbee",91:"#d3f9d8",92:"#b2f2bb",93:"#8ce99a",94:"#69db7c",95:"#51cf66",96:"#40c057",97:"#37b24d",98:"#2f9e44",99:"#2b8a3e",100:"#f4fce3",101:"#e9fac8",102:"#d8f5a2",103:"#c0eb75",104:"#a9e34b",105:"#94d82d",106:"#82c91e",107:"#74b816",108:"#66a80f",109:"#5c940d",110:"#fff9db",111:"#fff3bf",112:"#ffec99",113:"#ffe066",114:"#ffd43b",115:"#fcc419",116:"#fab005",117:"#f59f00",118:"#f08c00",119:"#e67700",120:"#fff4e6",121:"#ffe8cc",122:"#ffd8a8",123:"#ffc078",124:"#ffa94d",125:"#ff922b",126:"#fd7e14",127:"#f76707",128:"#e8590c",129:"#d9480f"}}},["NHnr"]);
//# sourceMappingURL=app.7bb0fb14defc59d2264c.js.map